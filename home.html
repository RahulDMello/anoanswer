<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>anoanswer</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- <script src = "node_modules\socket.io\node_modules\socket.io-client\dist\socket.io.js"></script> -->
        <script src ="/socket.io/socket.io.js"></script>
        <script>

            // var socket = io('http://localhost:8080');
            var socket = io('https://calm-crag-26465.herokuapp.com/');

            function isEnterKey(event) {
                if (event.keyCode === 13) {
                    updateQuestion();
                }
            }

            function updateQuestion() {
                socket.emit('RecieveNewQuestion', document.getElementById('txtInput').value);
                document.getElementById('txtInput').value = "";
            }

            socket.on('AttachNewQuestion', function (msg) {
                document.getElementById('messages').innerHTML = msg;
            });

            socket.on('AddNewQuestionToList', function (msg) {
                document.getElementById('questions').innerHTML += '<br/>' + msg;
            })

            function updatePosition() {
                updatePositionHelper();
                setInterval(updatePositionHelper(), 5000);
            }
            
            function updatePositionHelper() {
                navigator.geolocation.getCurrentPosition(function (pos) {
                    socket.emit('UpdatePosition', {coords : {'latitude' : pos.coords.latitude, 'longitude' : pos.coords.longitude}});
                    console.log(pos.coords);
                });
            }

        </script>
    </head>
    <body onload="updatePosition()">
        <h1 id="messages"> ASK A QUESTION : </h1>
        <input type='text' id='txtInput' onkeypress=isEnterKey(event) />
        <input type='button' onclick=updateQuestion() class="btn btn-default btn-lg" value="submit" />
        <h2> ANSWER ANY OF THE FOLLOWING QUESTIONS </h2>
        <div id = "questions"></div>
    </body>
</html>
